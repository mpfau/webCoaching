apply plugin: 'java'
apply plugin: 'eclipse'
//usePlugin 'groovy'

version = 1.0

sourceCompatibility = 1.5

defaultTasks "clean", "build" 

repositories {
    mavenCentral()
    mavenRepo urls: 'http://repository.springsource.com/maven/bundles/release'
    mavenRepo urls: 'http://repository.springsource.com/maven/bundles/external'
    mavenRepo urls: 'http://repository.springsource.com/maven/libraries/release'
    mavenRepo urls: 'http://repository.springsource.com/maven/libraries/external'
    mavenRepo urls: 'http://repository.jboss.org/maven2/'
}

dependencies {
//	groovy group: 'org.codehaus.groovy', name: 'groovy', version: '1.7.0'
    testCompile 'junit:junit:4.7'
//    compile 'org.slf4j:slf4j-api:1.6.1'
//    compile 'org.slf4j:slf4j-simple:1.6.1'
    compile 'ch.qos.logback:logback-classic:0.9.18'
    compile('org.jboss.resteasy:resteasy-jaxrs:1.2.1.GA'){
    	exclude module: 'slf4j-simple'
    }
    compile 'org.jboss.resteasy:resteasy-jackson-provider:1.2.1.GA'
    compile 'org.eclipse.jetty.aggregate:jetty-servlet:7.2.0.v20101020'
}

task eclipse.dependsOn(":cleanEclipse")

task wrapper(type: Wrapper) {
    gradleVersion = '0.9-rc-2'
}

jar {
    from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    manifest {
        attributes 'Main-Class': 'server.MyServer', 'Implementation-Version': version
    }
}
